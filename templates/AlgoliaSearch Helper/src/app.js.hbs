import algoliasearch from 'algoliasearch';
import algoliasearchHelper from 'algoliasearch-helper';

const client = algoliasearch('{{appId}}', '{{apiKey}}');
const helper = algoliasearchHelper(client, '{{indexName}}');

const $searchBox = document.querySelector('#searchBox input[type=search]');
const $hits = document.querySelector('#hits');

$searchBox.addEventListener('input', event => {
  const query = event.target.value;

  helper.setQuery(query).search();
});

helper.on('result', result => {
  $hits.innerHTML = `
    <ul>
      ${result.hits
        .map(hit => {{#if mainAttribute}}`<li>${hit._highlightResult.name.value}</li>`{{else}}`<li>${JSON.stringify(hit)}</li>`{{/if}})
        .join('')}
    </ul>`;
});

helper.search();
